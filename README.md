# Втора лабораториска вежба по Софтверско инженерство
## Ана Маркоска, бр. на индекс 233002
### Control flow graph
![CFG](https://github.com/user-attachments/assets/154a2a8e-c4e2-4779-8808-8c220d96b98a)
### Цикломатска комплексност
Цикломатската комплексност на дадениот код е 9, истата ја добив преку бројот на региони прикажани на Control flow graph-от. Друг начин за добивање на цикломатската комплексност е преку формулата P+1 кадешто Р е бројот на предикатни јазли (на сликата означени со сива боја), односно 8+1=9. Исто така може да пресметаме и како E-N+2 каде Е е бројот на ребра, а N е бројот на јазли, односно 33-26+2=9.

### Тест случаи според критериумот Every Statement 
- Тест случај 1: ```allItems = null, cardNumber = ""```
> Објаснување: Со овој тест случај се покриени линиите 1,2. Кај проверката if (allItems == null) се добива True и во линија 2 се фрла exception: "allItems list can't be null!".

- Тест случај 2: ```allItems = List.of(new Item("", 10, 200, 0.0)), cardNumber = ""```
> Објаснување: Со овој тест случај се покриени линиите 1,3,4.1,4.2,5,6,7. Кај условот if (allItems == null) се добива False па не влегува во линија 2. Продолжува на линија 3. Потоа оди во for циклусот каде се извршува иницијализацијата 4.1 и проверката i < allItems.size() однсно 4.2. Влегува внатре во for-от се извршуваат линија 5 и 6. Во линија 6, if (item.getName() == null || item.getName().length() == 0) ќе даде True бидејќи името на мојот item во овој тест случај има должина 0. Ќе влезе во линија 7 и тука се фрла exception: "Invalid item!".

- Тест случај 3: ```allItems = List.of(new Item("Book", 10, 500, 0.0)), cardNumber = "0122333444455555"```
> Објаснување: Со овој тест случај се покриени линиите 1,3,4.1,4.2,4.3,5,8,9,10,12,13,14,15,16.1,16.2,16.3,17,18,21. Кај условот if (allItems == null) се добива False па не влегува во линија 2. Продолжува на линија 3. Потоа оди во for циклусот каде се извршува иницијализацијата 4.1 и проверката i < allItems.size() односно 4.2. Влегува внатре во for-от се извршуваат линија 5 и 6. Во линија 6, if (item.getName() == null || item.getName().length() == 0) ќе даде False бидејќи името на мојот item во овој тест случај не е null и нема должина 0. Ќе продолжи на линија 8 каде условот if (item.getPrice() > 300 || item.getDiscount() > 0 || item.getQuantity() > 10) ќе биде True бидејќи во мојот item имам price == 500. Оди на линија 9. Потоа во линија 10 условот if (item.getDiscount() > 0) ќе даде False бидејќи во мојот item имам discount == 0.0. Оттука ќе продолжи во else односно линија 12. Па ќе се врати на 4.3 односно инкремент во for циклусот. Потоа надвор од for-от оди во 13, каде условот if (cardNumber != null && cardNumber.length() == 16) ќе биде True бидејќи cardNumber во овој тест случај не е null и е со должина 16. Се извршуваат линија 14, 15, и повторно има for циклус каде ќе се извршат иницијализацијата 16.1, и условот j < cardNumber.length() т.е. 16.2. Ќе влезе во циклусот, ќе се извршат 17, 18, но нема да влезе во линија 19 бидејќи сите карактери од cardNumber се валидни. Соодветно се враќа и на 4.3. Нема да влезе во линија 20. Ќе оди на линија 21 кадешто ќе го врати резултатот. Тука се извршува целиот блок на наредби и се добива резултат без exception.

- Тест случај 4: ```allItems = List.of(new Item("Book", 10, 500, 0.2)), cardNumber = "123456789"```
> Објаснување: Со овој тест случај се покриени линиите 1,3,4.1,4.2,4.3,5,8,9,10,11,13,20. Кај условот if (allItems == null) се добива False па не влегува во линија 2. Продолжува на линија 3. Потоа оди во for циклусот каде се извршува иницијализацијата 4.1 и проверката i < allItems.size() односно 4.2. Влегува внатре во for-от се извршуваат линија 5 и 6. Во линија 6, if (item.getName() == null || item.getName().length() == 0) ќе даде False бидејќи името на мојот item во овој тест случај не е null и нема должина 0. Ќе продолжи на линија 8 каде условот if (item.getPrice() > 300 || item.getDiscount() > 0 || item.getQuantity() > 10) ќе биде True бидејќи во мојот item имам price == 500. Оди на линија 9. Потоа во линија 10 условот if (item.getDiscount() > 0) ќе даде True бидејќи во мојот item имам discount == 0.2. Оди во линија 11. Оттука ќе се врати на 4.3 односно инкремент во for циклусот. Потоа надвор од for-от оди во 13, каде условот if (cardNumber != null && cardNumber.length() == 16) ќе биде False бидејќи cardNumber во овој тест случај не е null но нема должина 16. Оттука ќе оди во else односно линија 20 каде ќе фрли exception: "Invalid card number!".

- Тест случај 5: ```allItems = List.of(new Item("Book", 10, 500, 0.2)), cardNumber = "4cardNumberOfAna"```
> Објаснување: Со овој тест случај се покриени линиите 1,3,4.1,4.2,4.3,5,6,8,9,10,11,14,15,16.1,16.2,16.3,17,18,19. Кај условот if (allItems == null) се добива False па не влегува во линија 2. Продолжува на линија 3. Потоа оди во for циклусот каде се извршува иницијализацијата 4.1 и проверката i < allItems.size() односно 4.2. Влегува внатре во for-от се извршуваат линија 5 и 6. Во линија 6, if (item.getName() == null || item.getName().length() == 0) ќе даде False бидејќи името на мојот item во овој тест случај не е null и нема должина 0. Ќе продолжи на линија 8 каде условот if (item.getPrice() > 300 || item.getDiscount() > 0 || item.getQuantity() > 10) ќе биде True бидејќи во мојот item имам price == 500 и discount == 0.2. Оди на линија 9. Потоа во линија 10 условот if (item.getDiscount() > 0) ќе даде True бидејќи во мојот item имам discount == 0.2. Оди во линија 11. Оттука ќе се врати на 4.3 односно инкремент во for циклусот. Потоа надвор од for-от оди во 13, каде условот if (cardNumber != null && cardNumber.length() == 16) ќе биде True бидејќи cardNumber во овој тест случај не е null и е со должина 16. Се извршуваат линија 14, 15, и повторно има for циклус каде ќе се извршат иницијализацијата 16.1, и условот j < cardNumber.length() т.е. 16.2. Ќе влезе во циклусот, ќе се извршат 17, 18, во првата итерација бидејќи првиот карактер од cardNumber е валиден, и соодветно се враќа и на 4.3. Потоа во втората итерација ќе се извршат 17, 18, но условот во 18 if (allowed.indexOf(c) == -1) ќе даде True затоа што „с“ е невалиден карактер за cardNumber, дозволени се само цифрите од 0 до 9. Ќе влезе во линија 19 кадешто ќе фрли exception: "Invalid character in card number!". </br>

 
За да се постигне овој критериум ми беа потребни 5 тест случаи.

| C0 | тест_случај_1 | тест_случај_2 | тест_случај_3 | тест_случај_4 | тест_случај_5 |
| :---: | :---: | :---: | :---: | :---: | :---: |
| 1 | * | * | * | * | * |
| 2 | * | | | | |
| 3 | | * | * | * | * |
| 4.1 | | * | * | * | * |
| 4.2 | | * | * | * | * |
| 4.3 | | | * | * | * |
| 5 | | * | * | * | * |
| 6 | | * | | | * |
| 7 | | * | | | |
| 8 | | | * | * | * |
| 9 | | | * | * | * |
| 10 | | | * | * | * |
| 11 | | | | * | * |
| 12 | | | * | | * |
| 13 | | | * | * | |
| 14 | | | * | | * |
| 15 | | | * | | * |
| 16.1 | | | * | | * |
| 16.2 | | | * | | * |
| 16.3 | | | * | | * |
| 17 | | | * | | * |
| 18 | | | * | | * |
| 19 | | | | | * |
| 20 | | | | * | |
| 21 | | | * | | |




### Тест случаи според критериумот Multiple Condition за условот </br> if (item.getPrice() > 300 || item.getDiscount() > 0 || item.getQuantity() > 10)
| | item.getPrice() > 300 | item.getDiscount() > 0 | item.getQuantity() > 10 | 
| :---: | :---: | :---: | :---: | 
| 1 | Т | X | X | 
| 2 | F | T | X | 
| 3 | F | F | T | 
| 4 | F | F | F | 

Потребни се минимум 4 тест случаи за да се постигне овој критериум. Ова е така бидејќи со Lazy Evaluation ќе се елиминираат некои од комбинациите од табелата. Наместо да имаме 2^3=8 комбинации, ќе имаме само 4. Значи соодветно би ги имале следниве тест случаи:
- TXX: ```allItems = List.of(new Item("Book", 10, 500, 0.0)), cardNumber = "0122333444455555"```
> Објаснување: Имаме услов составен од 3 под-услови кои се одделени со OR. Тоа значи дека, во првиов случај доволно е само item.getPrice() > 300 да биде True за целиот израз да се евалуира на True. Останатите две можат да бидат или True или False.
- FTX: ```allItems = List.of(new Item("Book", 10, 200, 0.3)), cardNumber = "0122333444455555"```
> Објаснување: Во вториов случај ќе земеме item.getPrice() > 300 да биде False, и item.getDiscount() > 0 да биде True по што целиот израз ќе се евалуира на True. Последното може да биде или True или False.
- FFT: ```allItems = List.of(new Item("Book", 15, 200, 0.0)), cardNumber = "0122333444455555"```
> Објаснување: Во третиов случај ќе земеме item.getPrice() > 300 да биде False, item.getDiscount() > 0 да биде False и item.getQuantity() > 10 да биде True по што целиот израз ќе се евалуира на True. 
- FFF: ```allItems = List.of(new Item("Book", 5, 200, 0.0)), cardNumber = "0122333444455555"```
> Објаснување: Во четвртиов случај ќе земеме item.getPrice() > 300 да биде False, item.getDiscount() > 0 да биде False и item.getQuantity() > 10 да биде False по што целиот израз ќе се евалуира на False.
Истото ова го пробав и во Gradle со помош на assert изрази и сите тест случаи ми поминаа.
